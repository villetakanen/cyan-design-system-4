/* 
 * Semantic color mappings using the chroma palette
 * Uses light-dark() for automatic theme switching
 * Based on Material Design 3 principles
 */
:root {
  /* Surfaces, levels [0] to 4 */
  --color-surface: light-dark(
    var(--chroma-surface-10),
    var(--chroma-surface-90)
  );
  --color-surface-1: light-dark(
    white,
    color-mix(in hsl, var(--chroma-surface-90), var(--chroma-surface-80) 50%)
  );
  --color-surface-2: light-dark(white, var(--chroma-surface-80));
  --color-surface-3: light-dark(
    white,
    color-mix(in hsl, var(--chroma-surface-80), var(--chroma-surface-70) 50%)
  );
  --color-surface-4: light-dark(
    var(--chroma-surface-50),
    var(--chroma-surface-70)
  );
  --color-on-surface: light-dark(
    var(--chroma-surface-90),
    var(--chroma-surface-10)
  );
  --color-on-surface-secondary: light-dark(
    var(--chroma-surface-60),
    var(--chroma-surface-40)
  );
  --color-secondary: light-dark(
    color-mix(in hsl, var(--chroma-primary-70), transparent 78%),
    var(--chroma-primary-99)
  );
  --color-on-secondary: light-dark(
    var(--chroma-primary-95),
    var(--chroma-primary-40)
  );
  --color-secondary-1: light-dark(
    var(--chroma-primary-70),
    var(--chroma-primary-80)
  );

  /* Background of the application, below surfaces */
  --color-background: light-dark(
    color-mix(in hsl, var(--color-surface), var(--chroma-surface-20) 22%),
    var(--chroma-surface-99)
  );
  --color-on-background: light-dark(
    var(--chroma-surface-90),
    var(--chroma-surface-30)
  );

  /* Default text, headings, links, etc. */
  --color-text: light-dark(var(--chroma-surface-90), var(--chroma-surface-20));
  --color-text-high: light-dark(black, white);
  --color-text-low: light-dark(
    var(--chroma-surface-80),
    var(--chroma-surface-40)
  );

  --color-heading-1: light-dark(
    var(--chroma-surface-70),
    var(--chroma-surface-30)
  );

  --color-heading-2: light-dark(
    var(--chroma-surface-80),
    var(--chroma-surface-20)
  );

  /* Links */
  --color-link: light-dark(var(--chroma-surface-60), var(--chroma-surface-40));
  --color-link-hover: light-dark(
    var(--chroma-surface-50),
    var(--chroma-surface-20)
  );
  --color-link-active: light-dark(
    var(--chroma-surface-40),
    var(--chroma-surface-70)
  );

  --color-on-rail-button: light-dark(
    var(--chroma-surface-70),
    var(--chroma-surface-40)
  );

  --color-alert: light-dark(var(--chroma-primary-20), var(--chroma-primary-20));
  --color-on-alert: light-dark(var(--chroma-error), var(--chroma-error));

  /* Notifications (updated from existing) */
  --color-notify: light-dark(var(--chroma-primary-95), var(--chroma-warning));
  --color-on-notify: light-dark(
    var(--chroma-primary-20),
    var(--chroma-surface-70)
  );

  /* Code elements */
  --color-code: light-dark(var(--chroma-primary-10), var(--chroma-primary-99));
  --color-on-code: light-dark(
    var(--chroma-primary-90),
    var(--chroma-primary-10)
  );

  --color-on-focus: light-dark(
    var(--chroma-surface-99),
    var(--chroma-primary-10)
  );

  /* Reaction colors */
  --color-reaction-red: #e03c31;

  --color-hover: light-dark(
    color-mix(in hsl, var(--chroma-surface-50), transparent 90%),
    color-mix(in hsl, var(--chroma-surface-50), transparent 80%)
  );

  --color-button: light-dark(var(--chroma-surface-50), var(--chroma-surface-80));
  --color-button-light: light-dark(
    var(--chroma-primary-60),
    var(--chroma-primary-95)
  );
  --color-button-cta: light-dark(var(--chroma-error), var(--chroma-error));

  /* Borders */
  --color-border: light-dark(var(--chroma-surface-40), var(--chroma-surface-70));
  --color-border-hover: light-dark(
    var(--chroma-surface-50),
    var(--chroma-surface-60)
  );
  --color-border-focus: light-dark(
    var(--chroma-primary-70),
    var(--chroma-primary-40)
  );

  /* Text selection */
  --color-selection: light-dark(
    color-mix(in hsl, var(--chroma-primary-60), transparent 70%),
    color-mix(in hsl, var(--chroma-primary-40), transparent 70%)
  );
  --color-on-selection: var(--color-on-surface);

  /* Legacy semantic mappings for backward compatibility */
  --cn-color-primary: var(--chroma-primary-70);
  --cn-color-primary-variant: var(--chroma-primary-80);
  --cn-color-on-primary: var(--chroma-surface-10);

  --cn-color-secondary: var(--color-secondary);
  --cn-color-secondary-variant: var(--color-secondary-1);
  --cn-color-on-secondary: var(--color-on-surface);

  --cn-color-surface: var(--color-surface);
  --cn-color-surface-variant: var(--color-surface-1);
  --cn-color-on-surface: var(--color-on-surface);
  --cn-color-on-surface-variant: var(--color-text-low);

  --cn-color-background: var(--color-surface);
  --cn-color-on-background: var(--color-on-surface);

  /* Functional colors */
  --cn-color-success: var(--chroma-primary-60);
  --cn-color-warning: var(--chroma-warning);
  --cn-color-error: var(--chroma-error);
  --cn-color-info: var(--chroma-info);

  /* Interactive states */
  --cn-color-hover: var(--color-hover);
  --cn-color-focus: var(--color-on-focus);
  --cn-color-active: var(--chroma-primary-80);

  /* Elevation/Shadow colors */
  --color-shadow: light-dark(var(--chroma-surface-70), var(--chroma-surface-99));

  --color-elevation-1: var(--color-surface-1);
  --color-elevation-2: var(--color-surface-2);
  --color-elevation-3: var(--color-surface-3);

  /* inputs */
  --color-input: light-dark(var(--chroma-surface-20), var(--chroma-surface-95));
  --color-on-input: var(--color-on-surface);

  --color-input-hover: light-dark(
    var(--chroma-surface-30),
    var(--chroma-surface-99)
  );

  --color-input-focus: light-dark(
    var(--chroma-surface-30),
    var(--chroma-surface-99)
  );

  --color-input-disabled: light-dark(
    var(--chroma-surface-20),
    var(--chroma-surface-80)
  );

  /* Dialog/backdrop specific token */
  --background-dialog-backdrop: color-mix(
    in hsl,
    var(--color-shadow),
    transparent 44%
  );

  /* Lets just use the surface color for the input label for now */
  --color-on-label: var(--color-on-surface);

  --color-field: var(--color-input);
  --color-on-field: var(--color-on-surface);
  --color-on-field-placeholder: var(--color-on-surface-secondary);

  --color-field-hover: var(--color-input);
  --color-on-field-hover: var(--color-on-surface);

  --color-field-focus: var(--color-input-focus);
  --cn-color-on-field-active: var(--color-on-focus);

  --background-alert-tint: color-mix(
    in hsl,
    var(--color-alert),
    transparent 90%
  );

  /* Avatar colors */
  --cn-color-avatar-1: light-dark(
    var(--chroma-surface-20),
    var(--chroma-surface-80)
  );
  --cn-color-avatar-2: light-dark(
    var(--chroma-primary-50),
    var(--chroma-primary-80)
  );

  /* Bubble colors */
  --color-bubble: light-dark(
    color-mix(in hsl, var(--chroma-surface-10), var(--chroma-surface-20) 50%),
    color-mix(in hsl, var(--chroma-surface-90), var(--chroma-surface-70) 30%)
  );
  --color-on-bubble: var(--color-on-surface);
  --color-reply-bubble: light-dark(
    color-mix(in hsl, var(--chroma-primary-40), transparent 50%),
    color-mix(in hsl, var(--chroma-surface-90), var(--chroma-primary-90) 50%)
  );
  --color-on-reply-bubble: var(--color-on-surface);

  --color-on-button-cta: var(--color-on-button);
}
