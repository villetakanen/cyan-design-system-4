---
const currentPath = Astro.url.pathname;

function activeAttr(href: string) {
  // root only matches exactly
  if (href === '/') return currentPath === '/';

  // match exact href or any subpath that starts with the href
  return (
    currentPath === href ||
    currentPath.startsWith(`${href}/`) ||
    currentPath.startsWith(href)
  );
}
---

<nav class="rail">

  <a href="/"><cn-navigation-icon active={activeAttr('/') ? true : undefined} noun="fox"></cn-navigation-icon></a>

  <a href="/principles"><cn-navigation-icon active={activeAttr('/principles') ? true : undefined} noun="design" label="Principles"></cn-navigation-icon></a>

  <a href="/application"><cn-navigation-icon active={activeAttr('/application') ? true : undefined} noun="layout" label="Layout"></cn-navigation-icon></a>

  <a href="/styles"><cn-navigation-icon active={activeAttr('/styles') ? true : undefined} noun="palette" label="Styles"></cn-navigation-icon></a>

  <a href="/custom-elements">
    <cn-navigation-icon active={activeAttr('/custom-elements') ? true : undefined} noun="books" label="Elements"></cn-navigation-icon></a>

</nav>